process {
    executor = 'local'       // Use SLURM cluster scheduler
    queue = 'galaxy'    // your GPU queue or partition
    cpus = 1                 // number of CPUs per task
    memory = '10GB'
    time = '2h'

    container = '/gladstone/finkbeiner/steve/work/projects/datastudy/datastudy-cluster.sif'  
    containerEngine = 'singularity'
    //containerOptions = '--output=slurm-%j.out --gres=gpu:v100:1  --no-home --cleanenv --bind /gladstone/finkbeiner/imaging-home/vgramas/datastudy/bin:/app'
    shell = ['/bin/bash', '-c']

    // Optionally set cluster options globally for GPU requests
    //clusterOptions = '--gres=gpu:v100:1 -p interactive'

}


// Override only for GPU-enabled module
withName: SEGMENTATION_MONTAGE {
  cpus = 4
  memory = '32 GB'
  time = '2h'
  container = '/gladstone/finkbeiner/gpu_container.sif'
  containerOptions = '--nv'
  clusterOptions = '--gres=gpu:v100:1'
}

